# 备份服务器配置文件 - 跨机器部署示例
# 假设主服务器IP: 192.168.1.10, 备份服务器IP: 192.168.1.11

server:
  # 服务器地址配置 - 跨机器部署时可以使用相同端口
  quic_addr: ":8443"         # QUIC监听地址 (跨机器时可与主服务器用相同端口)
  http_addr: ":8080"         # HTTP API监听地址
  grpc_addr: ":8082"         # gRPC服务监听地址
  metrics_addr: ":9090"      # 监控指标监听地址
  upstream_addr: "localhost:9000"  # 上游gRPC服务地址

  # TLS配置
  cert_file: "certs/server.crt"  # TLS证书文件路径
  key_file: "certs/server.key"   # TLS私钥文件路径

  # 会话配置
  session_timeout: "5m"      # 会话超时时间
  ack_timeout: "10s"         # ACK超时时间
  max_retries: 3             # 最大重试次数

# 备份配置
backup:
  enabled: true              # 启用热备份功能
  mode: "backup"             # 备份模式: primary(主) 或 backup(备)
  server_id: "backup-1"      # 服务器ID
  readonly: true             # 只读模式（备份服务器使用）
  
  # 心跳配置
  heartbeat:
    interval: "2s"           # 心跳间隔
    listen_addr: ":8455"     # 心跳监听端口(备份服务器接收主服务器心跳)
    timeout: "10s"           # 心跳超时时间
    
  # 同步配置  
  sync:
    listen_addr: ":8456"     # 同步监听端口(备份服务器接收主服务器同步数据)
    batch_size: 50           # 同步批次大小
    timeout: "200ms"         # 同步超时
    buffer_size: 1000        # 同步缓冲区大小